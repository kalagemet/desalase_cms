{"ast":null,"code":"import _classCallCheck from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{scroller}from'react-scroll';import{Button,Card,Container,Header,Icon,Image,Message,Segment,Statistic}from'semantic-ui-react';import apiData from'../../data/api-get';import{Link}from'react-router-dom';var Produk=/*#__PURE__*/function(_Component){_inherits(Produk,_Component);var _super=_createSuper(Produk);function Produk(props){var _this;_classCallCheck(this,Produk);_this=_super.call(this,props);_this.loadMoreProduk=function(){_this.setState({loadingMore:true});if(_this.state.linkMore!==null){fetch(_this.state.linkMore).then(function(response){return response.json();}).then(function(response){if(response.next_page_url===null){_this.setState({moreProduk:false});}else{_this.setState({moreProduk:true,linkMore:response.next_page_url});}for(var i=0;i<response.data.length;i++){_this.state.dataProduk.push(response.data[i]);}_this.setState({loading:false,loadingMore:false});}).catch(function(err){console.log(err);alert(err);});}};_this.handleHapus=function(e){var conf=window.confirm('Anda Yakin menghapus '+e.target.name);if(conf){var id=e.target.id;_this.setState({loading:true});fetch(apiData.hapusproduk+'?id='+id).then(function(response){return response.json();}).then(function(response){if(!response.error){alert('berhasil');document.location.reload();}else{alert('error - '+response.msg);}_this.setState({loading:false});}).catch(function(err){alert(err);console.log(err);_this.setState({loading:false});});}};_this.state={dataProduk:[],noProduk:false,loading:true,moreProduk:false,linkMore:'',loadingMore:false,header:'Menampilkan Produk Populer',content:'Semoga anda menyukainya'};return _this;}_createClass(Produk,[{key:\"componentDidMount\",value:function componentDidMount(){this.filter();document.title='Etalase Desa | desalase.id';}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){document.title=this.state.header+' - Etalase Desa | desalase.id';}},{key:\"getDataProduk\",value:function getDataProduk(url){var _this2=this;fetch(url).then(function(response){return response.json();}).then(function(response){if(response.next_page_url===null){_this2.setState({moreProduk:false});}else{_this2.setState({moreProduk:true,linkMore:response.next_page_url});}if(response.data.length===0){_this2.setState({noProduk:true,loading:false});}else{_this2.setState({dataProduk:response.data,loading:false});}}).catch(function(err){console.log(err);_this2.setState({noProduk:true,loading:false});});}},{key:\"filter\",value:function filter(){var key='';var tag='';if(this.props.match){key=this.props.match.params.key;tag=this.props.match.params.tag;}if(this.props.makanan){this.setState({header:'Menampilkan Produk Makanan',content:'makanan dari UMKM persembahan desalase.id'});this.getDataProduk(apiData.makanan);}else if(this.props.minuman){this.setState({header:'Menampilkan Produk Minuman',content:'minuman dari UMKM persembahan desalase.id'});this.getDataProduk(apiData.minuman);}else if(this.props.lain){this.setState({header:'Menampilkan Produk UMKM Lainya',content:'lainya dari UMKM persembahan desalase.id'});this.getDataProduk(apiData.lain);}else if(this.props.buah){this.setState({header:'Menampilkan Produk Buah',content:'produk buah segar'});this.getDataProduk(apiData.buah);}else if(this.props.tanaman){this.setState({header:'Menampilkan Produk Tanaman',content:'produk tanaman hasil bumi'});this.getDataProduk(apiData.tanaman);}else if(this.props.hewani){this.setState({header:'Menampilkan Produk Hewani',content:'produk olahan dari hewan'});this.getDataProduk(apiData.hewani);}else if(this.props.jasa){this.setState({header:'Menampilkan Produk Jasa',content:'produk jasa persembahan desalase.id'});this.getDataProduk(apiData.jasa);}else if(this.props.konveksi){this.setState({header:'Menampilkan Produk Konveksi',content:'produk konveksi dari desalase.id'});this.getDataProduk(apiData.konveksi);}else{if(tag){this.setState({header:'Produk #'+this.props.match.params.tag,content:'menampilkan produk yang berhubungan dengan '+this.props.match.params.tag});this.getDataProduk(apiData.tag+this.props.match.params.tag);}else if(key){this.setState({header:'Hasil Pencarian \"'+this.props.match.params.key+'\"',content:'menampilkan produk yang berhubungan dengan '+this.props.match.params.key});this.getDataProduk(apiData.cari+this.props.match.params.key);}else{this.getDataProduk(apiData.favorite);}}if(!this.props.home){scroller.scrollTo('divider-page',{duration:800,delay:0,smooth:\"easeInOutQuart\"});}// else if (this.props.tentang) {\n//     scroller.scrollTo('footer-container', {\n//         duration: 800,\n//         delay: 0,\n//         smooth: \"easeInOutQuart\",\n//     });\n// }\n}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,moreProduk=_this$state.moreProduk,header=_this$state.header,content=_this$state.content,loading=_this$state.loading,dataProduk=_this$state.dataProduk,noProduk=_this$state.noProduk,loadingMore=_this$state.loadingMore;return/*#__PURE__*/React.createElement(Container,{vertical:true,className:\"produk-container\"},/*#__PURE__*/React.createElement(Button,{icon:\"plus circle\",basic:true,positive:true,size:\"huge\",content:\"Tambah Produk\",as:Link,to:'/produk/add',fluid:true}),/*#__PURE__*/React.createElement(Message,{as:\"h1\",visible:true,color:\"blue\",icon:\"sort amount down\",header:header,content:content}),/*#__PURE__*/React.createElement(\"br\",null),noProduk?/*#__PURE__*/React.createElement(Statistic,{className:\"no-produk-msg\",label:\"Tidak ada produk yang dapat ditampilkan\",value:\"Tidak Tersedia\",text:true}):/*#__PURE__*/React.createElement(Segment,{vertical:true,loading:loading},/*#__PURE__*/React.createElement(Card.Group,{centered:true},dataProduk.map(function(d,i){return/*#__PURE__*/React.createElement(Card,{key:i,centered:true,className:\"produk-card\"},/*#__PURE__*/React.createElement(Image,{className:\"produk-img\",style:{background:'url('+d.img+') no-repeat center'},wrapped:true,ui:false}),/*#__PURE__*/React.createElement(Card.Content,{textAlign:\"left\"},/*#__PURE__*/React.createElement(Card.Header,null,d.nama),/*#__PURE__*/React.createElement(Card.Meta,null,d.produsen),/*#__PURE__*/React.createElement(Card.Description,null,/*#__PURE__*/React.createElement(Header,{color:\"green\",as:\"h2\",textAlign:\"right\"},\"Rp. \",d.harga))),/*#__PURE__*/React.createElement(Card.Content,{extra:true},/*#__PURE__*/React.createElement(Button.Group,{fluid:true,vertical:true},/*#__PURE__*/React.createElement(Button,{fluid:true,color:\"yellow\",as:\"a\",href:'/produk/detail/'+d.id},/*#__PURE__*/React.createElement(Icon,{name:\"edit outline\"}),\"Edit\"),/*#__PURE__*/React.createElement(Button,{id:d.id,fluid:true,basic:true,color:\"orange\",onClick:_this3.handleHapus},/*#__PURE__*/React.createElement(Icon,{name:\"trash alternate outline\"}),\"Hapus\"))));})),moreProduk?/*#__PURE__*/React.createElement(Button,{disabled:loadingMore,onClick:this.loadMoreProduk,loading:loadingMore,content:\"Lihat Lainnya\",icon:\"arrow down\",labelPosition:\"right\",basic:true,color:\"blue\"}):/*#__PURE__*/React.createElement(Message,{color:\"yellow\",icon:\"zip\",header:\"Item terakhir\",content:\"Tidak tersedia lebih banyak lagi\"})));}}]);return Produk;}(Component);export default Produk;","map":{"version":3,"sources":["/Users/kalagemet/Data/desalase.id/website/cms/src/assets/page/Produk.js"],"names":["React","Component","scroller","Button","Card","Container","Header","Icon","Image","Message","Segment","Statistic","apiData","Link","Produk","props","loadMoreProduk","setState","loadingMore","state","linkMore","fetch","then","response","json","next_page_url","moreProduk","i","data","length","dataProduk","push","loading","catch","err","console","log","alert","handleHapus","e","conf","window","confirm","target","name","id","hapusproduk","error","document","location","reload","msg","noProduk","header","content","filter","title","url","key","tag","match","params","makanan","getDataProduk","minuman","lain","buah","tanaman","hewani","jasa","konveksi","cari","favorite","home","scrollTo","duration","delay","smooth","map","d","background","img","nama","produsen","harga"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { scroller } from 'react-scroll';\nimport { Button, Card, Container, Header, Icon, Image, Message, Segment, Statistic } from 'semantic-ui-react';\nimport apiData from '../../data/api-get';\nimport { Link } from 'react-router-dom';\n\nclass Produk extends Component{\n    constructor(props) {\n        super(props);\n        this.state = { \n            dataProduk:[],\n            noProduk:false, \n            loading:true, \n            moreProduk: false,\n            linkMore: '',\n            loadingMore: false,\n            header: 'Menampilkan Produk Populer',\n            content:'Semoga anda menyukainya'\n        };\n    }\n    \n    componentDidMount(){\n        this.filter();\n        document.title = 'Etalase Desa | desalase.id'\n    }\n\n    componentDidUpdate(){\n        document.title = this.state.header+' - Etalase Desa | desalase.id'\n    }\n    \n    getDataProduk(url){\n        fetch(url)\n        .then(response => response.json())\n        .then( response=> {\n            if(response.next_page_url===null){\n                this.setState({moreProduk:false})\n            }else{\n                this.setState({moreProduk:true, linkMore:response.next_page_url})\n            }\n            if(response.data.length===0){\n                this.setState({ noProduk:true, loading:false})\n            }else{\n                this.setState({ dataProduk:response.data, loading:false})\n            }\n        })\n        .catch(err=>{\n            console.log(err)\n            this.setState({ noProduk:true, loading:false})\n        })\n    }\n\n    loadMoreProduk = () =>{\n        this.setState({loadingMore:true})\n        if(this.state.linkMore!==null){\n            fetch(this.state.linkMore)\n            .then(response => response.json())\n            .then( response=> {\n                if(response.next_page_url===null){\n                    this.setState({moreProduk:false})\n                }else{\n                    this.setState({\n                        moreProduk:true, \n                        linkMore:response.next_page_url\n                    })\n                }\n                for (let i = 0; i < response.data.length; i++) {\n                    this.state.dataProduk.push(response.data[i])\n                }\n                this.setState({loading:false, loadingMore:false})\n            })\n            .catch(err=>{\n                console.log(err)\n                alert(err)\n            })\n        }\n    }\n    \n    filter(){\n        let key = ''\n        let tag = ''\n        if (this.props.match) {\n            key=this.props.match.params.key \n            tag=this.props.match.params.tag   \n        }\n        if(this.props.makanan) {\n            this.setState({header: 'Menampilkan Produk Makanan',content:'makanan dari UMKM persembahan desalase.id'})\n            this.getDataProduk(apiData.makanan)\n        }else if (this.props.minuman) {\n            this.setState({header: 'Menampilkan Produk Minuman',content:'minuman dari UMKM persembahan desalase.id'})\n            this.getDataProduk(apiData.minuman)\n        }else if (this.props.lain) {\n            this.setState({header: 'Menampilkan Produk UMKM Lainya',content:'lainya dari UMKM persembahan desalase.id'})\n            this.getDataProduk(apiData.lain)\n        }else if (this.props.buah) {\n            this.setState({header: 'Menampilkan Produk Buah',content:'produk buah segar'})\n            this.getDataProduk(apiData.buah)\n        }else if (this.props.tanaman) {\n            this.setState({header: 'Menampilkan Produk Tanaman',content:'produk tanaman hasil bumi'})\n            this.getDataProduk(apiData.tanaman)\n        }else if (this.props.hewani) {\n            this.setState({header: 'Menampilkan Produk Hewani',content:'produk olahan dari hewan'})\n            this.getDataProduk(apiData.hewani)\n        }else if (this.props.jasa) {\n            this.setState({header: 'Menampilkan Produk Jasa',content:'produk jasa persembahan desalase.id'})\n            this.getDataProduk(apiData.jasa)\n        }else if (this.props.konveksi) {\n            this.setState({header: 'Menampilkan Produk Konveksi',content:'produk konveksi dari desalase.id'})\n            this.getDataProduk(apiData.konveksi)\n        }else{\n            if (tag) {\n                this.setState({header: 'Produk #'+this.props.match.params.tag,content:'menampilkan produk yang berhubungan dengan '+this.props.match.params.tag})\n                this.getDataProduk(apiData.tag+this.props.match.params.tag)\n            }else if(key){\n                this.setState({header: 'Hasil Pencarian \"'+this.props.match.params.key+'\"',content:'menampilkan produk yang berhubungan dengan '+this.props.match.params.key})\n                this.getDataProduk(apiData.cari+this.props.match.params.key)\n            }else{\n                this.getDataProduk(apiData.favorite)\n            }\n        }\n        if (!this.props.home) {\n            scroller.scrollTo('divider-page', {\n                duration: 800,\n                delay: 0,\n                smooth: \"easeInOutQuart\",\n            });\n        }\n        // else if (this.props.tentang) {\n        //     scroller.scrollTo('footer-container', {\n        //         duration: 800,\n        //         delay: 0,\n        //         smooth: \"easeInOutQuart\",\n        //     });\n        // }\n    }\n\n    handleHapus=(e)=>{\n        var conf = window.confirm('Anda Yakin menghapus '+e.target.name)\n        if (conf) {\n            var id = e.target.id\n            this.setState({loading:true})\n            fetch(apiData.hapusproduk+'?id='+id)\n            .then(response => response.json())\n            .then( response=> {\n                if(!response.error){\n                    alert('berhasil')\n                    document.location.reload()\n                }else{\n                    alert('error - '+response.msg)\n                }\n                this.setState({loading:false})\n            })\n            .catch(err=>{\n                alert(err)\n                console.log(err)\n                this.setState({loading:false})\n            })\n        }\n    }\n\n    render() {\n        const {\n            moreProduk,\n            header,\n            content,\n            loading,\n            dataProduk,\n            noProduk,\n            loadingMore\n        } = this.state;\n        return (\n            <Container vertical className='produk-container'>\n                <Button icon='plus circle' basic positive size='huge' content='Tambah Produk' as={Link} to={'/produk/add'} fluid />\n                <Message as='h1'\n                    visible\n                    color='blue'\n                    icon='sort amount down'\n                    header={header}\n                    content={content}\n                /><br/>\n                {noProduk ? \n                <Statistic className='no-produk-msg' label='Tidak ada produk yang dapat ditampilkan' value='Tidak Tersedia' text /> :\n                <Segment vertical loading={loading}>\n                    <Card.Group centered>\n                        {dataProduk.map((d,i)=>(\n                            <Card key={i} centered className='produk-card'>\n                                <Image className='produk-img' style={{background:'url('+d.img+') no-repeat center'}} wrapped ui={false} />\n                                <Card.Content textAlign='left'>\n                                    <Card.Header>{d.nama}</Card.Header>\n                                    <Card.Meta>{d.produsen}</Card.Meta>\n                                    <Card.Description>\n                                        <Header color='green' as='h2' textAlign='right'>\n                                            Rp. {d.harga}\n                                        </Header> \n                                    </Card.Description>\n                                </Card.Content>\n                                <Card.Content extra>\n                                    <Button.Group fluid vertical>\n                                        <Button fluid color='yellow' as='a' href={'/produk/detail/'+d.id} >\n                                            <Icon name='edit outline' />\n                                            Edit\n                                        </Button>\n                                        <Button id={d.id} fluid basic color='orange' onClick={this.handleHapus} >\n                                            <Icon name='trash alternate outline' />\n                                            Hapus\n                                        </Button>\n                                    </Button.Group>\n                                </Card.Content>\n                            </Card>\n                        ))}\n                    </Card.Group>\n                    {moreProduk ?\n                    <Button disabled={loadingMore} onClick={this.loadMoreProduk} loading={loadingMore} content='Lihat Lainnya' icon='arrow down' labelPosition='right' basic color='blue'/>\n                    :<Message\n                        color='yellow'\n                        icon='zip'\n                        header='Item terakhir'\n                        content='Tidak tersedia lebih banyak lagi'\n                    />}\n                </Segment>}\n            </Container>\n        );\n    }\n}\n\nexport default Produk;"]},"metadata":{},"sourceType":"module"}