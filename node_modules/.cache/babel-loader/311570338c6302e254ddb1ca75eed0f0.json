{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'slick-carousel/slick/slick.css';import'slick-carousel/slick/slick-theme.css';import{Button,Container,Divider,Dropdown,Form,Grid,Header,Input,Segment}from'semantic-ui-react';import apiData from'../../data/api-get';import{scroller}from'react-scroll';import ReactQuill from'react-quill';var Add=/*#__PURE__*/function(_Component){_inherits(Add,_Component);var _super=_createSuper(Add);function Add(props){var _this;_classCallCheck(this,Add);_this=_super.call(this,props);_this.modules={toolbar:[['bold','italic','underline','strike'],// toggled buttons\n// ['blockquote', 'code-block'],                    // blocks\n[{'header':1},{'header':2}],// custom button values\n[{'list':'ordered'},{'list':'bullet'}],// lists\n// [{ 'script': 'sub'}, { 'script': 'super' }],     // superscript/subscript\n// [{ 'indent': '-1'}, { 'indent': '+1' }],         // outdent/indent\n// [{ 'direction': 'rtl' }],                        // text direction\n// [{ 'size': ['small', false, 'large', 'huge'] }], // custom dropdown\n// [{ 'header': [1, 2, 3, 4, 5, 6, false] }],       // header dropdown\n// [{ 'color': [] }, { 'background': [] }],         // dropdown with defaults\n// [{ 'font': [] }],                                // font family\n[{'align':[]}]// text align\n// ['clean'],                                       // remove formatting\n]};_this.formats=['header','font','background','color','code','size','bold','italic','underline','strike','blockquote','list','bullet','indent','script','align','direction','link','image','code-block','formula','video'];_this.handleUpload=function(e){if(e.target.nama.value===''||e.target.produsen.value===''||_this.state.kategoriSelected===''||_this.state.deskripsi===''||_this.state.tagSelected===''||e.target.img.files.length===0||e.target.harga.value===0||e.target.wa.value===''||e.target.tokped.value===''||e.target.shopee.value===''){alert('form tidak lengkap');e.target.nama.focus();}else{_this.setState({loading:true,disabled:true});var fromData=new FormData();fromData.append('nama',e.target.nama.value);fromData.append('desk',_this.state.deskripsi);var _iterator=_createForOfIteratorHelper(e.target.img.files),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var file=_step.value;fromData.append('img[]',file,file.name);}// fromData.append('img[]',e.target.img.files)\n}catch(err){_iterator.e(err);}finally{_iterator.f();}fromData.append('produsen',e.target.produsen.value);fromData.append('harga',e.target.harga.value);fromData.append('url',e.target.wa.value+'|'+e.target.tokped.value+'|'+e.target.shopee.value);fromData.append('tags',_this.state.tagSelected);fromData.append('id_kategori',_this.state.kategoriSelected);fetch(apiData.addProduk,{method:'POST',headers:{'Authorization':'Bearer '+JSON.parse(localStorage.getItem('token'))},body:fromData}).then(function(response){return response.json();}).then(function(response){if(!response.error){alert('berhasil');console.log(response.msg);document.location.reload();}else{alert('error - '+response.msg);}_this.setState({loading:false,disabled:false});}).catch(function(err){console.log(err);_this.setState({loading:false,disabled:false});});}};_this.state={loading:false,disabled:false,harga:'',kategori:[],spiner:true,tags:[],tagSelected:'',kategoriSelected:0,deskripsi:''};return _this;}_createClass(Add,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.scrollTop();document.title='Tambah Produk | desalase.id';fetch(apiData.getKategori,{headers:{'Authorization':'Bearer '+JSON.parse(localStorage.getItem('token'))}}).then(function(response){return response.json();}).then(function(response){if(response.error){alert('gagal mengambil kategori');}else{_this2.setState({kategori:response.data,spiner:false});}}).catch(function(err){console.log(err);});fetch(apiData.getTags,{headers:{'Authorization':'Bearer '+JSON.parse(localStorage.getItem('token'))}}).then(function(response){return response.json();}).then(function(response){if(response.error){// alert('gagal mengambil tags')\n}else{_this2.setState({tags:response.data,spiner:false});}}).catch(function(err){console.log(err);});}},{key:\"scrollTop\",value:function scrollTop(){scroller.scrollTo('divider-page',{duration:800,delay:0,smooth:\"easeInOutQuart\"});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,harga=_this$state.harga,loading=_this$state.loading,tags=_this$state.tags,spiner=_this$state.spiner,kategori=_this$state.kategori,disabled=_this$state.disabled;return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Segment,{loading:loading,vertical:true,textAlign:\"left\",className:\"detail-container\"},/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleUpload},/*#__PURE__*/React.createElement(Grid,{className:\"detail-group\"},/*#__PURE__*/React.createElement(Grid.Column,{mobile:16,tablet:6,computer:6},/*#__PURE__*/React.createElement(Segment,{style:{height:'300px'},className:\"detail-image\"},/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(Input,{disabled:disabled,name:\"img\",multiple:true,input:{accept:\"image/x-png,image/gif,image/jpeg\"},type:\"file\"}))),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(Dropdown,{disabled:disabled,loading:spiner,placeholder:\"tags\",fluid:true,search:true,selection:true,options:tags,multiple:true,allowAdditions:true,onChange:function onChange(e,value){var tmp='';for(var i=0;i<value.value.length;i++){tmp=tmp+value.value[i];if(i!==value.value.length-1){tmp=tmp+'|';}}_this3.setState({tagSelected:tmp});},onAddItem:function onAddItem(e,d){var tmp=tags;tmp.push({key:d.value,text:d.value,value:d.value});_this3.setState({tags:tmp});}}))),/*#__PURE__*/React.createElement(Grid.Column,{mobile:16,tablet:10,computer:10},/*#__PURE__*/React.createElement(Header,{className:\"detail-deskripsi\"},/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(Input,{disabled:disabled,name:\"nama\",fluid:true,placeholder:\"Kopi Bubuk\",label:\"Nama Produk\"})),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(Input,{disabled:disabled,fluid:true,name:\"produsen\",placeholder:\"KWT Muda Mudi\",label:\"Produsen\"})),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(Dropdown,{onChange:function onChange(e,value){_this3.setState({kategoriSelected:value.value});},name:\"kategori\",loading:spiner,placeholder:\"Kategori\",fluid:true,selection:true,options:kategori,disabled:disabled})),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(ReactQuill,{name:\"deskripsi\",theme:\"snow\",placeholder:\"Deskripsi\",onChange:function onChange(e){return _this3.setState({deskripsi:e});},modules:this.modules,formats:this.formats})),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(Input,{disabled:disabled,name:\"harga\",pattern:\"[0-9]*\",fluid:true,placeholder:\"harga\",onChange:function onChange(e){var num=e.target.validity.valid?e.target.value:harga;_this3.setState({harga:num});},value:harga,label:\"Harga\"}))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(Input,{disabled:disabled,name:\"wa\",placeholder:\"https://wa.me/xxxxxxxx\",fluid:true,label:\"Link Wa\"})),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(Input,{disabled:disabled,name:\"tokped\",fluid:true,placeholder:\"https://tokopedia.com/xxxx\",label:\"Link Tokopedia\"})),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(Input,{disabled:disabled,name:\"shopee\",fluid:true,placeholder:\"https://shopee.com/xxxx\",label:\"Link Shopee\"})))),/*#__PURE__*/React.createElement(Container,{className:\"tags-container\"},/*#__PURE__*/React.createElement(Button,{disabled:disabled,loading:disabled,type:\"submit\",size:\"big\",fluid:true,icon:\"plus\",content:\"Tambah Produk\",color:\"blue\",labelPosition:\"right\"})))),/*#__PURE__*/React.createElement(Divider,{className:\"bootom-detail\"}));}}]);return Add;}(Component);export default Add;","map":{"version":3,"sources":["/Users/kalagemet/Data/desalase.id/website/cms/src/assets/page/Add.js"],"names":["React","Component","Button","Container","Divider","Dropdown","Form","Grid","Header","Input","Segment","apiData","scroller","ReactQuill","Add","props","modules","toolbar","formats","handleUpload","e","target","nama","value","produsen","state","kategoriSelected","deskripsi","tagSelected","img","files","length","harga","wa","tokped","shopee","alert","focus","setState","loading","disabled","fromData","FormData","append","file","name","fetch","addProduk","method","headers","JSON","parse","localStorage","getItem","body","then","response","json","error","console","log","msg","document","location","reload","catch","err","kategori","spiner","tags","scrollTop","title","getKategori","data","getTags","scrollTo","duration","delay","smooth","height","accept","tmp","i","d","push","key","text","num","validity","valid"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport 'slick-carousel/slick/slick.css';\nimport 'slick-carousel/slick/slick-theme.css';\nimport {  Button, Container, Divider, Dropdown, Form, Grid, Header, Input, Segment } from 'semantic-ui-react';\nimport apiData from '../../data/api-get';\nimport { scroller } from 'react-scroll';\nimport ReactQuill from 'react-quill';\n\nclass Add extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading:false, \n            disabled:false,\n            harga:'',\n            kategori:[],\n            spiner:true,\n            tags:[],\n            tagSelected:'',\n            kategoriSelected:0,\n            deskripsi:'',\n        }\n    }\n    modules = {\n        toolbar : [\n            ['bold', 'italic', 'underline', 'strike'],       // toggled buttons\n            // ['blockquote', 'code-block'],                    // blocks\n            [{ 'header': 1 }, { 'header': 2 }],              // custom button values\n            [{ 'list': 'ordered'}, { 'list': 'bullet' }],    // lists\n            // [{ 'script': 'sub'}, { 'script': 'super' }],     // superscript/subscript\n            // [{ 'indent': '-1'}, { 'indent': '+1' }],         // outdent/indent\n            // [{ 'direction': 'rtl' }],                        // text direction\n            // [{ 'size': ['small', false, 'large', 'huge'] }], // custom dropdown\n            // [{ 'header': [1, 2, 3, 4, 5, 6, false] }],       // header dropdown\n            // [{ 'color': [] }, { 'background': [] }],         // dropdown with defaults\n            // [{ 'font': [] }],                                // font family\n            [{ 'align': [] }],                               // text align\n            // ['clean'],                                       // remove formatting\n        ]\n    }\n\n    formats = [\n        'header', 'font', 'background', 'color', 'code', 'size',\n        'bold', 'italic', 'underline', 'strike', 'blockquote',\n        'list', 'bullet', 'indent', 'script', 'align', 'direction',\n        'link', 'image', 'code-block', 'formula', 'video'\n    ]\n\n    componentDidMount(){\n        this.scrollTop();\n        document.title = 'Tambah Produk | desalase.id'\n        fetch(apiData.getKategori,{\n            headers:{\n                'Authorization': 'Bearer '+JSON.parse(localStorage.getItem('token')),\n            },\n        })\n        .then(response => response.json())\n        .then( response=> {\n            if(response.error){\n                alert('gagal mengambil kategori')\n            }else{\n                this.setState({kategori:response.data,spiner:false})\n            }\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n        fetch(apiData.getTags,{\n            headers:{\n                'Authorization': 'Bearer '+JSON.parse(localStorage.getItem('token')),\n            },\n        })\n        .then(response => response.json())\n        .then( response=> {\n            if(response.error){\n                // alert('gagal mengambil tags')\n            }else{\n                this.setState({tags:response.data,spiner:false})\n            }\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n    }\n\n    scrollTop(){\n        scroller.scrollTo('divider-page', {\n            duration: 800,\n            delay: 0,\n            smooth: \"easeInOutQuart\",\n        });\n    }\n\n    handleUpload=(e)=>{\n        if(e.target.nama.value==='' ||\n        e.target.produsen.value==='' ||\n        this.state.kategoriSelected==='' ||\n        this.state.deskripsi==='' ||\n        this.state.tagSelected==='' ||\n        e.target.img.files.length===0 ||\n        e.target.harga.value===0 ||\n        e.target.wa.value==='' ||\n        e.target.tokped.value==='' ||\n        e.target.shopee.value===''){\n            alert('form tidak lengkap')\n            e.target.nama.focus()\n        }else{\n            this.setState({loading:true,disabled:true})\n            const fromData = new FormData()\n            fromData.append('nama',e.target.nama.value)\n            fromData.append('desk',this.state.deskripsi)\n            for(const file of e.target.img.files){\n                fromData.append('img[]',file, file.name)\n            }\n            // fromData.append('img[]',e.target.img.files)\n            fromData.append('produsen',e.target.produsen.value)\n            fromData.append('harga',e.target.harga.value)\n            fromData.append('url',e.target.wa.value+'|'+e.target.tokped.value+'|'+e.target.shopee.value)\n            fromData.append('tags',this.state.tagSelected)\n            fromData.append('id_kategori',this.state.kategoriSelected)\n            fetch(apiData.addProduk, {\n                method: 'POST',\n                headers:{\n                    'Authorization': 'Bearer '+JSON.parse(localStorage.getItem('token')),\n                },\n                body: fromData\n            })\n            .then(response => response.json())\n            .then( response=> {\n                if(!response.error){\n                    alert('berhasil')\n                    console.log(response.msg)\n                    document.location.reload()\n                }else{\n                    alert('error - '+response.msg)\n                }\n                this.setState({loading:false,disabled:false})\n            })\n            .catch(err=>{\n                console.log(err)\n                this.setState({loading:false,disabled:false})\n            })\n        }\n    }\n\n    render() {\n        const {harga, loading,tags, spiner, kategori, disabled} = this.state;\n        return (\n            <Container>\n                <Segment loading={loading} vertical textAlign='left' className='detail-container'>\n                    <Form onSubmit={this.handleUpload}>\n                        <Grid className='detail-group'>\n                            <Grid.Column mobile={16} tablet={6} computer={6}>\n                                <Segment style={{height:'300px'}} className='detail-image'>\n                                    <Form.Field required>\n                                        <Input disabled={disabled} name='img'  multiple input={{accept:\"image/x-png,image/gif,image/jpeg\"}} type='file'  />\n                                    </Form.Field>\n                                </Segment>\n                                <Form.Field required>\n                                    <Dropdown disabled={disabled} loading={spiner} placeholder='tags' fluid search selection options={tags} multiple allowAdditions\n                                        onChange={(e,value)=>{\n                                            var tmp=''\n                                            for(let i = 0;i<value.value.length;i++){\n                                                tmp=tmp+value.value[i]\n                                                if(i!==value.value.length-1){\n                                                    tmp = tmp+'|'\n                                                }\n                                            }\n                                            this.setState({tagSelected:tmp})\n                                        }}\n                                        onAddItem={(e,d)=>{\n                                            const tmp = tags\n                                            tmp.push({key:d.value,text:d.value,value:d.value})\n                                            this.setState({tags:tmp})\n                                        }}\n                                    />\n                                </Form.Field>\n                            </Grid.Column>\n                            <Grid.Column mobile={16} tablet={10} computer={10}>\n                                <Header className='detail-deskripsi'>\n                                    <Form.Field required>\n                                        <Input disabled={disabled} name='nama' fluid placeholder='Kopi Bubuk' label='Nama Produk' />\n                                    </Form.Field>\n                                    <Form.Field required>\n                                        <Input disabled={disabled} fluid name='produsen' placeholder='KWT Muda Mudi' label='Produsen' />\n                                    </Form.Field>\n                                    <Form.Field required>\n                                        <Dropdown \n                                            onChange={(e,value)=>{this.setState({kategoriSelected:value.value})}}\n                                            name='kategori' \n                                            loading={spiner} \n                                            placeholder='Kategori' \n                                            fluid \n                                            selection \n                                            options={kategori} \n                                            disabled={disabled} \n                                        />\n                                    </Form.Field>\n                                    <Form.Field required>\n                                        <ReactQuill \n                                            name='deskripsi'\n                                            theme='snow' \n                                            placeholder='Deskripsi'\n                                            onChange={(e)=>this.setState({deskripsi:e})}\n                                            modules={this.modules}\n                                            formats={this.formats}\n                                        />\n                                    </Form.Field>\n                                    <Form.Field required>\n                                        <Input disabled={disabled}  name='harga' pattern=\"[0-9]*\" fluid placeholder=\"harga\" onChange={(e)=>{\n                                            const num = (e.target.validity.valid) ? e.target.value : harga\n                                            this.setState({harga:num})\n                                        }} value={harga} label='Harga' />\n                                    </Form.Field>\n                                </Header>\n                                <Divider/>\n                                    <Form.Field required>\n                                        <Input disabled={disabled}  name='wa' placeholder='https://wa.me/xxxxxxxx' fluid label='Link Wa' />\n                                    </Form.Field>\n                                    <Form.Field required>\n                                        <Input disabled={disabled}  name='tokped' fluid placeholder='https://tokopedia.com/xxxx' label='Link Tokopedia' />\n                                    </Form.Field>\n                                    <Form.Field required>\n                                        <Input disabled={disabled}  name='shopee' fluid placeholder='https://shopee.com/xxxx' label='Link Shopee' />\n                                    </Form.Field>\n                            </Grid.Column>\n                        </Grid>\n                        <Container className='tags-container'>\n                            <Button disabled={disabled} loading={disabled} type='submit' size='big' fluid icon='plus' content='Tambah Produk' color='blue' labelPosition='right'/>\n                        </Container>\n                    </Form>\n                </Segment>\n                <Divider className='bootom-detail' />\n            </Container>\n        );\n    }\n}\n\nexport default Add;"]},"metadata":{},"sourceType":"module"}