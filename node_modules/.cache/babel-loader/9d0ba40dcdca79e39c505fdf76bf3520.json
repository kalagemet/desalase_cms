{"ast":null,"code":"import _classCallCheck from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kalagemet/Data/desalase.id/website/cms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Button,Container,Form,Header,Icon,Input,Segment}from'semantic-ui-react';import apiData from'../../data/api-get';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.loginHandler=function(e){if(!e.target.user.value){e.target.user.focus();}else if(!e.target.pass.value){e.target.pass.focus();}else{_this.setState({loading:true});var fromData=new FormData();fromData.append('grant_type','password');fromData.append('client_id',apiData.client_id);fromData.append('client_secret',apiData.client_secret);fromData.append('username',e.target.user.value);fromData.append('password',e.target.pass.value);fetch(apiData.login,{method:'POST',body:fromData}).then(function(response){return response.json();}).then(function(response){if(!response.error){localStorage.setItem(\"token\",JSON.stringify(response.access_token));}else{alert('error '+response.error);console.log(response);}_this.setState({loading:false});document.location.reload();}).catch(function(err){console.log(err);_this.setState({loading:false});});}};_this.state={loading:false};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){if(localStorage.getItem('token')){// localStorage.removeItem('token')\ndocument.location.reload();}}},{key:\"render\",value:function render(){var loading=this.state.loading;return/*#__PURE__*/React.createElement(Segment,{textAlign:\"center\",vertical:true,className:\"login-container\"},/*#__PURE__*/React.createElement(Header,{inverted:true,as:\"h1\",icon:true},/*#__PURE__*/React.createElement(Icon,{name:\"sign-in\"}),\"LOGIN\",/*#__PURE__*/React.createElement(Header.Subheader,null,\"Atur halaman desalase.id\")),/*#__PURE__*/React.createElement(Container,{className:\"login-form\"},/*#__PURE__*/React.createElement(Form,{onSubmit:this.loginHandler},/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(Input,{name:\"user\",focus:true,icon:\"users\",iconPosition:\"left\",placeholder:\"username\"})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(Input,{name:\"pass\",type:\"password\",focus:true,icon:\"key\",iconPosition:\"left\",placeholder:\"password\"})),/*#__PURE__*/React.createElement(Button,{loading:loading,size:\"huge\",type:\"submit\",fluid:true,positive:true},\"Masuk\"))));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/Users/kalagemet/Data/desalase.id/website/cms/src/assets/page/Login.js"],"names":["React","Component","Button","Container","Form","Header","Icon","Input","Segment","apiData","Login","props","loginHandler","e","target","user","value","focus","pass","setState","loading","fromData","FormData","append","client_id","client_secret","fetch","login","method","body","then","response","json","error","localStorage","setItem","JSON","stringify","access_token","alert","console","log","document","location","reload","catch","err","state","getItem"],"mappings":"goBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAT,CAAiBC,SAAjB,CAA4BC,IAA5B,CAAkCC,MAAlC,CAA0CC,IAA1C,CAAgDC,KAAhD,CAAuDC,OAAvD,KAAsE,mBAAtE,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,C,GAEMC,CAAAA,K,8FACF,eAAYC,KAAZ,CAAmB,uCACf,uBAAMA,KAAN,EADe,MAcnBC,YAdmB,CAcN,SAACC,CAAD,CAAK,CACd,GAAG,CAACA,CAAC,CAACC,MAAF,CAASC,IAAT,CAAcC,KAAlB,CAAwB,CACpBH,CAAC,CAACC,MAAF,CAASC,IAAT,CAAcE,KAAd,GACH,CAFD,IAGK,IAAG,CAACJ,CAAC,CAACC,MAAF,CAASI,IAAT,CAAcF,KAAlB,CAAwB,CACzBH,CAAC,CAACC,MAAF,CAASI,IAAT,CAAcD,KAAd,GACH,CAFI,IAEA,CACD,MAAKE,QAAL,CAAc,CAACC,OAAO,CAAC,IAAT,CAAd,EACA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,MAAT,CAAgB,YAAhB,CAA6B,UAA7B,EACAF,QAAQ,CAACE,MAAT,CAAgB,WAAhB,CAA4Bd,OAAO,CAACe,SAApC,EACAH,QAAQ,CAACE,MAAT,CAAgB,eAAhB,CAAgCd,OAAO,CAACgB,aAAxC,EACAJ,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA2BV,CAAC,CAACC,MAAF,CAASC,IAAT,CAAcC,KAAzC,EACAK,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA2BV,CAAC,CAACC,MAAF,CAASI,IAAT,CAAcF,KAAzC,EACAU,KAAK,CAACjB,OAAO,CAACkB,KAAT,CAAgB,CACjBC,MAAM,CAAE,MADS,CAEjBC,IAAI,CAAER,QAFW,CAAhB,CAAL,CAICS,IAJD,CAIM,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAJd,EAKCF,IALD,CAKO,SAAAC,QAAQ,CAAG,CACd,GAAG,CAACA,QAAQ,CAACE,KAAb,CAAmB,CACfC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACO,YAAxB,CAA9B,EACH,CAFD,IAEK,CACDC,KAAK,CAAC,SAASR,QAAQ,CAACE,KAAnB,CAAL,CACAO,OAAO,CAACC,GAAR,CAAYV,QAAZ,EACH,CACD,MAAKZ,QAAL,CAAc,CAACC,OAAO,CAAC,KAAT,CAAd,EACAsB,QAAQ,CAACC,QAAT,CAAkBC,MAAlB,GACH,CAdD,EAeCC,KAfD,CAeO,SAAAC,GAAG,CAAE,CACRN,OAAO,CAACC,GAAR,CAAYK,GAAZ,EACA,MAAK3B,QAAL,CAAc,CAACC,OAAO,CAAC,KAAT,CAAd,EACH,CAlBD,EAmBH,CACJ,CAhDkB,CAEf,MAAK2B,KAAL,CAAa,CACT3B,OAAO,CAAC,KADC,CAAb,CAFe,aAKlB,C,+EAEkB,CACf,GAAGc,YAAY,CAACc,OAAb,CAAqB,OAArB,CAAH,CAAiC,CAC7B;AACAN,QAAQ,CAACC,QAAT,CAAkBC,MAAlB,GACH,CACJ,C,uCAqCQ,IACGxB,CAAAA,OADH,CACe,KAAK2B,KADpB,CACG3B,OADH,CAEL,mBACI,oBAAC,OAAD,EAAS,SAAS,CAAC,QAAnB,CAA4B,QAAQ,KAApC,CAAqC,SAAS,CAAC,iBAA/C,eACI,oBAAC,MAAD,EAAQ,QAAQ,KAAhB,CAAiB,EAAE,CAAC,IAApB,CAAyB,IAAI,KAA7B,eACI,oBAAC,IAAD,EAAM,IAAI,CAAC,SAAX,EADJ,sBAGI,oBAAC,MAAD,CAAQ,SAAR,iCAHJ,CADJ,cAQI,oBAAC,SAAD,EAAW,SAAS,CAAC,YAArB,eACI,oBAAC,IAAD,EAAM,QAAQ,CAAE,KAAKR,YAArB,eACI,oBAAC,IAAD,CAAM,KAAN,mBACI,oBAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,CAAmB,KAAK,KAAxB,CAAyB,IAAI,CAAC,OAA9B,CAAsC,YAAY,CAAC,MAAnD,CAA0D,WAAW,CAAC,UAAtE,EADJ,CADJ,cAII,oBAAC,IAAD,CAAM,KAAN,mBACI,oBAAC,KAAD,EAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,UAAxB,CAAmC,KAAK,KAAxC,CAAyC,IAAI,CAAC,KAA9C,CAAoD,YAAY,CAAC,MAAjE,CAAwE,WAAW,CAAC,UAApF,EADJ,CAJJ,cAOI,oBAAC,MAAD,EAAQ,OAAO,CAAEQ,OAAjB,CAA0B,IAAI,CAAC,MAA/B,CAAsC,IAAI,CAAC,QAA3C,CAAoD,KAAK,KAAzD,CAA0D,QAAQ,KAAlE,UAPJ,CADJ,CARJ,CADJ,CAsBH,C,mBA1EenB,S,EA6EpB,cAAeS,CAAAA,KAAf","sourcesContent":["import React, { Component } from 'react'\nimport { Button, Container, Form, Header, Icon, Input, Segment } from 'semantic-ui-react';\nimport apiData from '../../data/api-get';\n\nclass Login extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading:false\n        }\n    }\n\n    componentDidMount(){\n        if(localStorage.getItem('token')){\n            // localStorage.removeItem('token')\n            document.location.reload()\n        }\n    }\n    \n    loginHandler=(e)=>{\n        if(!e.target.user.value){\n            e.target.user.focus()\n        }\n        else if(!e.target.pass.value){\n            e.target.pass.focus()\n        }else{\n            this.setState({loading:true})\n            const fromData = new FormData()\n            fromData.append('grant_type','password')\n            fromData.append('client_id',apiData.client_id)\n            fromData.append('client_secret',apiData.client_secret)\n            fromData.append('username',e.target.user.value)\n            fromData.append('password',e.target.pass.value)\n            fetch(apiData.login, {\n                method: 'POST',\n                body: fromData\n            })\n            .then(response => response.json())\n            .then( response=> {\n                if(!response.error){\n                    localStorage.setItem(\"token\", JSON.stringify(response.access_token));\n                }else{\n                    alert('error '+response.error)\n                    console.log(response)\n                }\n                this.setState({loading:false})\n                document.location.reload()\n            })\n            .catch(err=>{\n                console.log(err)\n                this.setState({loading:false})\n            })\n        }\n    }\n    render() {\n        const { loading } = this.state\n        return (\n            <Segment textAlign='center' vertical className='login-container'>\n                <Header inverted as='h1' icon>\n                    <Icon name='sign-in' />\n                    LOGIN\n                    <Header.Subheader>\n                        Atur halaman desalase.id\n                    </Header.Subheader>\n                </Header>\n                <Container className='login-form'>\n                    <Form onSubmit={this.loginHandler}>\n                        <Form.Field>\n                            <Input name='user' focus icon='users' iconPosition='left' placeholder='username' />\n                        </Form.Field>\n                        <Form.Field>\n                            <Input name='pass' type='password' focus icon='key' iconPosition='left' placeholder='password' />\n                        </Form.Field>\n                        <Button loading={loading} size='huge' type='submit' fluid positive>Masuk</Button>\n                    </Form>\n                </Container>\n            </Segment>\n        );\n    }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}